{"version":3,"file":"bz-comment-area.js","sources":["bz-comment-area.src.js"],"names":["angular","factory","define","amd","$","app","module","people","nature","objects","places","symbols","bzCommentAreaController","$scope","icons","htmlEntities","str","String","replace","emptyGif","createIcon","emoji","text","showSmiles","selection","saveSelection","$showSmiles","insert","$img","attachEvent","e","returnValue","editor","focus","restoreSelection","replaceSelection","trigger","window","getSelection","savedSelection","sel","removeAllRanges","i","len","length","addRange","document","createRange","select","content","range","node","createTextNode","getRangeAt","rangeCount","deleteContents","insertNode","setStart","setTimeout","setStartAfter","collapse","pasteHTML","outerHTML","ranges","push","type","toLowerCase","directive","ELEMENT_NODE","TEXT_NODE","TAGS_BLOCK","KEY_ESC","KEY_TAB","bzCommentArea","restrict","scope","require","controller","templateUrl","link","element","attrs","ngModel","val","addClass","attr","contenteditable","on","$setViewValue","html","$$phase","$apply","execCommand","keyCode","escapeRegex","find","hide","after","$render","$viewValue","$formatters","unshift","modelValue","key","RegExp","$parsers","lines","line","flush","join","sanitizeNode","nodeType","nodeValue","tagName","isBlock","indexOf","alt","getAttribute","children","childNodes","run","$templateCache","put"],"mappings":"CAAC,SAASA,EAASC,GACf,MAAsB,kBAAXC,SAAyBA,OAAOC,KAEvCD,OAAO,iBAAkB,SAAU,WAAY,SAASE,EAAGJ,GACvD,MAAOC,GAAQD,KADnBE,QAIOD,EAAQD,IAErBA,SAAW,KAAM,SAASA,GAC5B,GAAIK,GAAML,EAAQM,OAAO,iBAAkB,aAC3CD,GAAIJ,QAAQ,qBAAsB,WAE9B,GACIM,IACI,SACA,QACA,WACA,QACA,SACA,UACA,QACA,aACA,gBACA,sBACA,UACA,WACA,YACA,OACA,OACA,QACA,+BACA,+BACA,WACA,UACA,uBACA,mBACA,WACA,UACA,WACA,YACA,aACA,YACA,WACA,SACA,iBACA,WACA,cACA,QACA,QACA,UACA,eACA,aACA,UACA,aACA,YACA,MACA,MACA,MACA,SACA,aACA,YACA,aACA,QACA,OACA,UACA,SACA,MACA,OACA,aACA,aACA,MACA,cACA,eACA,WACA,WACA,QACA,eACA,aACA,eACA,QACA,cACA,eACA,YACA,aACA,aACA,mBACA,QACA,kBACA,WACA,OACA,QACA,QACA,OAEA,QACA,cACA,WACA,mBACA,gBACA,MACA,OACA,cACA,QACA,eACA,OAGA,OACA,WACA,aACA,UACA,QAEA,OACA,IACA,OACA,OACA,aACA,WACA,aACA,aACA,cACA,eACA,OACA,aACA,OACA,SACA,QACA,UACA,SAEA,SACA,SACA,wBACA,0BACA,SACA,UACA,WACA,UACA,0BACA,cACA,kBACA,2BACA,kBACA,MACA,aACA,oBACA,UACA,UACA,YACA,MACA,OACA,QACA,MACA,OACA,cACA,YACA,yBACA,sBACA,kBACA,sBACA,MACA,QACA,WACA,aACA,YACA,iBACA,cACA,YACA,aACA,kBACA,UACA,cACA,gBACA,kBACA,cACA,eACA,gBACA,YACA,QACA,OACA,OACA,OACA,UACA,MACA,OACA,OACA,SACA,cACA,qBACA,sBACA,iBACA,kBAWA,aAEJC,GACI,QACA,WACA,QACA,YACA,UACA,MACA,UACA,QACA,QACA,MACA,MACA,QACA,UACA,SACA,OACA,OACA,QACA,QACA,OACA,MACA,WACA,MACA,OACA,cACA,SACA,QACA,YACA,QACA,QACA,WACA,aACA,QACA,OACA,aACA,gBACA,iBACA,UACA,UACA,SACA,MACA,WACA,MACA,SACA,QACA,UACA,gBACA,OACA,QACA,SACA,UACA,OACA,MACA,MACA,gBACA,SACA,UACA,SACA,OACA,UACA,OACA,OACA,SACA,KACA,cACA,WACA,YACA,kBACA,UACA,OACA,SACA,aACA,UACA,iBACA,QACA,mBACA,OACA,YACA,WACA,aACA,SACA,cACA,OACA,WACA,SACA,YACA,iBACA,iBACA,WACA,WACA,UACA,cACA,QACA,uBACA,gBACA,sBACA,qBACA,WACA,uBACA,qBACA,sBACA,YACA,sBACA,oBACA,uBACA,8BACA,+BACA,OACA,eACA,iBACA,aACA,UACA,YACA,eACA,UACA,YAEJC,GACI,SACA,aACA,QACA,iBACA,eACA,QACA,YACA,WACA,aACA,aACA,iBACA,QACA,QACA,iBACA,OACA,OACA,UACA,gBACA,OACA,gBACA,UACA,eACA,KACA,MACA,cACA,SACA,eACA,eACA,WACA,KACA,SACA,QACA,YACA,qBACA,QACA,MACA,WACA,MACA,QACA,UACA,OACA,cACA,OACA,YACA,yBACA,cACA,QACA,QACA,YACA,OACA,MACA,YACA,SACA,OACA,oBACA,uBACA,MACA,OACA,aACA,kBACA,iBACA,gBACA,UACA,UACA,QACA,UACA,UACA,OACA,UACA,SACA,SACA,SACA,eACA,SACA,OACA,WACA,MACA,SACA,QACA,OACA,cACA,mBACA,SACA,aACA,cACA,WACA,oBACA,cACA,iBACA,oBACA,uBACA,OACA,UACA,OACA,MACA,QACA,OACA,UACA,iBACA,iBACA,gBACA,YACA,2BACA,6BACA,SACA,YACA,WACA,OACA,aACA,cACA,mBACA,WACA,UACA,YACA,YACA,UACA,iBACA,mBACA,cACA,aACA,YACA,cACA,WACA,iCACA,SACA,QACA,WACA,aACA,aACA,YACA,YACA,WACA,aACA,SACA,WACA,SACA,YACA,iBACA,UACA,OACA,qBACA,YACA,eACA,cACA,UACA,SACA,MACA,SACA,SACA,QACA,WACA,MACA,OACA,SACA,gBACA,mBACA,SACA,gBACA,aACA,cACA,uBACA,WACA,OACA,UACA,UACA,OACA,SACA,OACA,MACA,aACA,aACA,UACA,YACA,SACA,OACA,SACA,YACA,WACA,OACA,QACA,SACA,UACA,iBACA,QACA,0BACA,QACA,SACA,SACA,SACA,SACA,QACA,aACA,YACA,kBACA,YACA,UACA,QACA,QACA,aACA,wBACA,SACA,MACA,OACA,cACA,OACA,QACA,WACA,iBACA,aACA,iBACA,QACA,YACA,QACA,cACA,eACA,YACA,QACA,eACA,QACA,QACA,YACA,YACA,eACA,OACA,QACA,OACA,OACA,QACA,MACA,QACA,WACA,UACA,WACA,YACA,aACA,WACA,OACA,SACA,gBACA,QACA,WACA,YACA,QACA,cACA,YACA,QACA,WACA,SACA,aACA,aACA,QACA,QACA,SACA,OACA,YACA,eACA,WACA,SACA,QAEJC,GACI,cACA,QACA,oBACA,SACA,SACA,cACA,WACA,OACA,oBACA,aACA,QACA,UACA,SACA,mBACA,uBACA,eACA,cACA,kBACA,kBACA,OACA,UACA,cACA,QACA,aACA,yBACA,UACA,QACA,oBACA,kBACA,iBACA,UACA,eACA,WACA,iBACA,OACA,YACA,OACA,WACA,UACA,SACA,SACA,WACA,aACA,mBACA,OACA,mBACA,OACA,iBACA,qBACA,oBACA,UACA,WACA,sBACA,MACA,UACA,OACA,gBACA,oBACA,MACA,eACA,iBACA,aACA,sBACA,cACA,YACA,UACA,QACA,QACA,UACA,SACA,oBACA,mBACA,aACA,WACA,cACA,aACA,SACA,WACA,yBACA,gBACA,UACA,eACA,WACA,MACA,eACA,UACA,SACA,aACA,iBACA,gBACA,kBACA,QACA,cACA,kBACA,gBACA,0BACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAEJC,GACI,MACA,MACA,QACA,OACA,OACA,MACA,QACA,QACA,OACA,aACA,kBACA,OACA,OACA,UACA,iBACA,aACA,gBACA,aACA,eACA,OACA,MACA,mBACA,oBACA,cACA,WACA,mBACA,oBACA,oBACA,kBACA,mBACA,qBACA,mBACA,4BACA,mBACA,mBACA,gBACA,iBACA,mBACA,0BACA,SACA,eACA,qBACA,KACA,4BACA,SACA,aACA,MACA,MACA,KACA,OACA,OACA,KACA,SACA,OACA,kBACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,KACA,WACA,OACA,SACA,cACA,aACA,UACA,aACA,QACA,gBACA,SACA,KACA,gBACA,0BACA,SACA,kBACA,IACA,mBACA,eACA,UACA,sBACA,KACA,MACA,KACA,gBACA,WACA,mBACA,gBACA,oBACA,cACA,iBACA,oBACA,WACA,wBACA,2BACA,mBACA,KACA,iBACA,mBACA,QACA,oBACA,QACA,SACA,SACA,SACA,MACA,QACA,QACA,WACA,cACA,YACA,WACA,SACA,YACA,mBACA,8BACA,IACA,IACA,KACA,KACA,kCACA,UACA,MACA,KACA,OACA,SACA,WACA,UACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,SACA,WACA,oBACA,YACA,aACA,KACA,IACA,yBACA,WACA,cACA,IACA,yBACA,kBACA,mBACA,sBACA,eACA,aACA,mBACA,wBACA,eACA,OACA,aACA,YACA,wBACA,UACA,eACA,eACA,mBACA,sBACA,sBACA,eACA,eACA,aACA,oBACA,qBACA,uBACA,qBACA,uBACA,qBACA,0BACA,SAGR,QAEIJ,OAAQA,EACRC,OAAQA,EACRE,OAAQA,EACRD,QAASA,EACTE,QAASA,IAGjB,IAAIC,IAA2B,SAAU,qBAAsB,SAASC,EAAQC,GAC5ED,EAAOC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"}